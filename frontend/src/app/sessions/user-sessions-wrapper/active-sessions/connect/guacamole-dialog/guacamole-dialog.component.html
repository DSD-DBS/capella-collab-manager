<!--
 ~ SPDX-FileCopyrightText: Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<div
  *ngIf="
    isPersistentSession(session) && session.version?.tool?.integrations?.t4c
  "
>
  <div class="m-m-card">
    <div class="title">TeamForCapella session token</div>
    If you'd like to connect to TeamForCapella while working with Capella,
    <br />
    please copy your session token and enter it when prompted in your Capella
    session.
    <br />
    You can always return to this dialog by clicking on "Connect" in the "Active
    sessions" overview. <br />
    <div *ngIf="session?.t4c_password">
      <span
        class="cursor-copy border font-mono"
        [cdkCopyToClipboard]="session!.t4c_password"
        (click)="showClipboardMessage()"
      >
        <span [ngClass]="{ blur: !t4cPasswordRevealed }">{{
          session!.t4c_password
        }}</span></span
      >

      <button
        *ngIf="!t4cPasswordRevealed"
        (click)="this.t4cPasswordRevealed = true"
        mat-mini-fab
        matTooltip="Show session token"
      >
        <mat-icon> blur_off</mat-icon>
      </button>
      <button
        *ngIf="t4cPasswordRevealed"
        (click)="this.t4cPasswordRevealed = false"
        mat-mini-fab
        matTooltip="Hide session token"
      >
        <mat-icon> blur_on</mat-icon>
      </button>
    </div>
    <div *ngIf="!session?.t4c_password">
      No session token was generated for your session.
    </div>
  </div>
  <hr />
</div>

<div class="m-m-card">
  <div class="title">Connect to the session</div>
  Please click on this button to connect to the server: <br />
  <button mat-flat-button color="primary" (click)="redirectToGuacamole()">
    Connect to Session
  </button>
</div>
<hr />
<div class="m-m-card">
  <div class="title">Wait for {{ session.version?.tool?.name }}</div>
  After opening the session, {{ session.version?.tool?.name }}
  {{ session.version?.name }} starts automatically. This can take up to one
  minute.
</div>
<div>
  <button mat-stroked-button class="w-full" (click)="this.dialogRef.close()">
    Close
  </button>
</div>
