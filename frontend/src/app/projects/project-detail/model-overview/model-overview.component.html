<!--
 ~ SPDX-FileCopyrightText: Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<!--
 ~ Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<div class="models" *ngIf="this.modelService.models">
  <div class="models-title">
    <h2 id="title">Models</h2>
    <a
      mat-button
      [routerLink]="['/create-model', projectService.project?.slug]"
    >
      <mat-icon id="add-icon">add</mat-icon>
    </a>
  </div>
  <mat-card *ngFor="let model of this.modelService.models">
    <div class="header">
      <div class="title">{{ model.name }}</div>
      <div class="right">
        <mat-card class="nature"><div>Library</div> </mat-card>
        <mat-card class="editingMode"><div>T4C</div></mat-card>
      </div>
    </div>
    <div class="content-wrapper">
      <p class="content">
        {{
          model.git_model
            ? model.description
            : "A primary source needs to be set."
        }}
      </p>
      <div class="actions">
        <div class="left">
          <a
            mat-mini-fab
            matTooltip="Configure model"
            [routerLink]="['/model', project_slug, model.slug]"
          >
            <mat-icon>settings</mat-icon>
          </a>
          <a mat-mini-fab disabled matTooltip="Download model">
            <mat-icon>cloud_download</mat-icon>
          </a>
          <a
            mat-mini-fab
            [disabled]="!model.t4c_model"
            matTooltip="Start synchronization"
          >
            <mat-icon>sync</mat-icon>
          </a>
          <a
            *ngIf="integrations.git"
            mat-mini-fab
            [disabled]="!model.git_model"
            matTooltip="Open git repository"
          >
            <mat-icon>link</mat-icon>
          </a>
          <a
            *ngIf="integrations.git"
            routerLink="/workspaces"
            [disabled]="!model.git_model"
            mat-mini-fab
            matTooltip="Request persistent session"
          >
            <mat-icon> screen_share</mat-icon>
          </a>
          <a
            mat-mini-fab
            matTooltip="Open readonly session"
            [disabled]="!model.git_model"
          >
            <mat-icon>remove_red_eye</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </mat-card>
</div>
