<!--
 ~ SPDX-FileCopyrightText: Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<div class="models" *ngIf="models">
  <div class="models-title">
    <h2 id="title">Models</h2>
    <a mat-button [routerLink]="['/project', project.slug, 'models', 'create']">
      <mat-icon id="add-icon">add</mat-icon>
    </a>
  </div>
  <mat-card *ngFor="let model of models">
    <div class="header">
      <div class="header-text">
        <div class="title">{{ model.name }}</div>
        <span class="subtitle">
          {{ model.tool.name }}
          <span *ngIf="model.version"> {{ model.version.name }}</span>
          <span *ngIf="!model.version"> (Version not specified)</span>
        </span>
      </div>

      <div class="right">
        <mat-card class="nature"
          ><div>
            <div class="model-badge-title">Nature</div>
            <div *ngIf="model.type">{{ model.type.id }}</div>
            <div *ngIf="!model.type">Not specified</div>
          </div></mat-card
        >
        <mat-card class=""> </mat-card>
        <mat-card class="editingMode"
          ><div>
            <div class="model-badge-title">Working mode</div>
            {{ getPrimaryWorkingMode(model) }}
          </div></mat-card
        >
      </div>
    </div>
    <div class="content-wrapper">
      <div class="content">
        {{ model.description || "This model has no description." }}
      </div>
      <div class="actions">
        <div class="left">
          <a
            mat-mini-fab
            matTooltip="Configure model"
            [routerLink]="['model', model.slug]"
          >
            <mat-icon>settings</mat-icon>
          </a>
          <a mat-mini-fab disabled matTooltip="Download model (Coming soon)">
            <mat-icon>cloud_download</mat-icon>
          </a>
          <a
            mat-mini-fab
            [disabled]="!model.t4c_model_id"
            matTooltip="Start synchronization (Coming soon)"
          >
            <mat-icon>sync</mat-icon>
          </a>
          <a
            *ngIf="model.git_model_id"
            mat-mini-fab
            [disabled]="!model.git_model_id"
            matTooltip="Open git repository"
          >
            <mat-icon>link</mat-icon>
          </a>
          <a
            *ngIf="model.t4c_model_id"
            routerLink="/workspaces"
            mat-mini-fab
            matTooltip="Request persistent session"
          >
            <mat-icon> screen_share</mat-icon>
          </a>
          <a
            mat-mini-fab
            *ngIf="model.git_model_id"
            matTooltip="Open readonly session"
          >
            <mat-icon>remove_red_eye</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </mat-card>
</div>
