<!--
 ~ Copyright DB Netz AG and the capella-collab-manager contributors
 ~ SPDX-License-Identifier: Apache-2.0
 -->

<mat-card *ngIf="!containerReady">
  Thanks for requesting a session! Our scheduler will take care of the request.
  <br />
  Depending on the demand, the creation can take a few minutes. <br />In most of
  the cases the session should be available within 30 seconds. <br />
  <b>You will be automatically redirected once the creation is successful!</b>
</mat-card>

<mat-card *ngIf="failure">
  An unknown error occured in our backend. <br />Please check the session state
  under "Active Sessions". <br />You may need to request a new session.
</mat-card>

<div *ngIf="session?.type == 'persistent' && !containerReady && !failure">
  The current state of your request is: <br />
  <mat-card
    class="session-state"
    [ngClass]="sessionService.beatifyState(session?.state).css"
  >
    {{ sessionService.beatifyState(session?.state).text }}
  </mat-card>
</div>

<div *ngIf="session?.type == 'readonly' && !containerReady && !failure">
  <ul>
    <li>
      <mat-card class="step">
        <app-session-progress-icon
          [state]="evaluateStep('INITIAL')"
        ></app-session-progress-icon>
        <span class="description">Allocation of Resources</span>
      </mat-card>
    </li>
    <li>
      <mat-card class="step">
        <app-session-progress-icon
          [state]="evaluateStep('LOAD_MODEL')"
        ></app-session-progress-icon>
        <span class="description">Pulling latest version of the model</span>
      </mat-card>
    </li>
    <li>
      <mat-card class="step">
        <app-session-progress-icon
          [state]="evaluateStep('PREPARE_WORKSPACE')"
        ></app-session-progress-icon>
        <span class="description">Preparing workspace</span>
      </mat-card>
    </li>
    <li>
      <mat-card class="step">
        <app-session-progress-icon
          [state]="evaluateStep('SESSION')"
        ></app-session-progress-icon>
        <span class="description">Start session</span>
      </mat-card>
    </li>
  </ul>
</div>
<app-session-created
  [session]="session"
  *ngIf="containerReady"
></app-session-created>
