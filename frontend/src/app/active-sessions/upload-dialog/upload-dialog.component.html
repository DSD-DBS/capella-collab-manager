<div class="progress">
  <mat-progress-bar class="progress-bar" mode="determinate" [value]="uploadProgress" *ngIf="uploadProgress">
  </mat-progress-bar>
  <mat-icon class="cancel-upload" (click)="cancelUpload()" *ngIf="uploadProgress">delete_forever</mat-icon>
</div>


<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle matTreeNodePadding>
      {{node.name}}
      <button mat-button (click)="removeFileFromSystem(node.name)">
        <mat-icon>
          delete
        </mat-icon>
      </button>

      <!--
      <button mat-button (click)="add()">
        <mat-icon>
          download
        </mat-icon>
       </button>
       -->

  </mat-tree-node>

  <mat-tree-node *matTreeNodeDef="let node; when: hasNoContent" matTreeNodePadding>
    <button mat-icon-button disabled>
      <mat-icon>create_new_folder</mat-icon>
    </button>
    <mat-form-field appearance="fill">
      <mat-label>New directory...</mat-label>
      <input matInput #itemValue placeholder="">
    </mat-form-field>
    <button mat-button (click)="addNewDir(node, itemValue.value)">Confirm</button>
  </mat-tree-node>

  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <div class="mat-tree-node">
        <button mat-icon-button matTreeNodeToggle
                [attr.aria-label]="'Toggle ' + node.name">
          <mat-icon class="mat-icon-rtl-mirror">
            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>

        </button>
          <mat-icon>folder</mat-icon>{{node.name}}
        <button mat-icon-button (click)="placeholder()">
          <mat-icon>create_new_folder</mat-icon>
        </button>

        <button mat-button color="primary"
              (click)="fileInput.click()"
              style="margin-right:20px"
              >
              <mat-icon>upload_file</mat-icon>
        </button>

        <input hidden type="file" #fileInput (change)="onFileInput(fileInput.files, node.id)" multiple />

      </div>
      <div [class.example-tree-invisible]="!treeControl.isExpanded(node)"
          role="group">
        <ng-container matTreeNodeOutlet></ng-container>
      </div>


  </mat-nested-tree-node>
</mat-tree>



<!--
<button mat-button color="primary"
      (click)="fileInput.click()"
      style="margin-right:20px"
      >
      Select Files
      <mat-icon>attach_file</mat-icon>
</button>

<input hidden type="file" #fileInput (change)="onFileInput(fileInput.files)" multiple />

<button [disabled]="!files.length" type="submit" mat-raised-button color="primary" (click)="onSubmit()"
  style="margin-bottom:30px">
  Submit
</button>

<li *ngFor="let file of files">
  {{ file.name }}
  <button mat-button (click)="removeFile(file)">X</button>
</li>
{{this.files || "No file uploaded yet."}}
-->





<div mat-dialog-actions>
  <button mat-button (click)="this.dialogRef.close()">Close</button>
  <button [disabled]="!files.length" type="submit" mat-raised-button color="primary" (click)="onSubmit()"
  style="margin-left:30px">
  Submit
  </button>
</div>
